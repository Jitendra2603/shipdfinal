# Use Node.js official image as the base
FROM node:18-alpine

# Set working directory
WORKDIR /app

# Copy package.json and package-lock.json
COPY package.json package-lock.json ./

# Install dependencies
RUN npm install

# Copy the rest of the frontend code
COPY . .

# Install additional testing dependencies
RUN npm install --save-dev @testing-library/react chai mocha ts-node typescript @types/chai @types/mocha

# Set environment variable for testing
ENV NODE_ENV=test

# Run the tests using ts-node for TypeScript support
CMD ["npx", "mocha", "--require", "ts-node/register", "tests/**/*.test.tsx"]
